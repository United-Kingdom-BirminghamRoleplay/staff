<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rank Structure - UKBRUM Staff</title>
    <link rel="icon" type="image/png" href="./images/ukbrum_png.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<script>
  window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
</script>
<script defer src="/_vercel/insights/script.js"></script>

<body>
    <nav class="sidebar" id="sidebar">
        <ul class="sidebar-nav">
            <li><a href="index.html" class="nav-link">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </a></li>
            <li><a href="ranks.html" class="nav-link active">
                <i class="fas fa-users"></i>
                <span>Rank Structure</span>
            </a></li>
            <li><a href="melonlysystem.html" class="nav-link">
                <i class="fas fa-clipboard-list"></i>
                <span>Melonly System</span>
            </a></li>
            <li><a href="resources.html" class="nav-link">
                <i class="fas fa-tools"></i>
                <span>Resources</span>
            </a></li>
            <li><a href="forms.html" class="nav-link">
                <i class="fas fa-file-alt"></i>
                <span>Forms</span>
            </a></li>
        </ul>
        <div class="sidebar-logout">
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i>
                <span class="logout-text">Logout</span>
            </button>
        </div>
    </nav>

    <main class="main-content">
        <section class="top-search">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-icon"></i>
                    <input type="text" id="siteSearch" placeholder="Search site content..." class="search-input" autocomplete="off">
                    <button class="filter-btn"><i class="fas fa-filter"></i></button>
                </div>
            </div>
            <div id="searchResults" class="search-results"></div>
        </section>
        
        <section class="greeting-section">
            <h1 class="greeting-text">Staff Hierarchy</h1>
            <p class="greeting-subtitle">Staff hierarchy at Birmingham Roleplay is the structured ranking system that defines roles, responsibilities, and lines of communication within the team.</p>
        </section>

        <div id="ranksContainer">
            <!-- Ranks will be loaded dynamically -->
        </div>
    </main>

    <footer>
        <p>&copy; 2025 UKBRUM Emergency Response: Liberty County. All rights reserved.</p>
    </footer>

    <script>
        async function loadRanks() {
            try {
                const response = await fetch('./data/ranks.json');
                const data = await response.json();
                const container = document.getElementById('ranksContainer');
                
                const sections = [
                    { key: 'senior_management', title: 'Senior Management', icon: 'crown' },
                    { key: 'management', title: 'Management', icon: 'users-cog' },
                    { key: 'staff', title: 'Staff', icon: 'shield' }
                ];

                sections.forEach(section => {
                    const sectionDiv = document.createElement('section');
                    sectionDiv.className = 'guidelines-section';
                    
                    sectionDiv.innerHTML = `
                        <h2><i class="fas fa-${section.icon}"></i> ${section.title}</h2>
                        <table class="rank-table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Responsibilities</th>
                                    <th>Quota</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${data[section.key].map(rank => `
                                    <tr>
                                        <td><i class="fas fa-${rank.icon}"></i> <strong>${rank.rank}</strong></td>
                                        <td>${rank.responsibilities}</td>
                                        <td>${rank.minHours === 0 ? 'No requirement' : rank.minHours + ' hours/week'}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    `;
                    
                    container.appendChild(sectionDiv);
                });

                // Add promotion requirements
                const promoSection = document.createElement('section');
                promoSection.className = 'guidelines-section';
                promoSection.innerHTML = `
                    <h2><i class="fas fa-rocket"></i> Promotion Requirements</h2>
                    <div class="punishment-level">
                        <p>To enhance your prospects for promotion, consistently excel in your current responsibilities like constantly coming on to moderate or whatever your tasks may be, proactively seek opportunities for expanded responsibilities. We are always looking at those staff members who want to actually be here. We are not expected to keep you in our team so we suggest you make yourself known and wanting to be in our team.</p>

                    </div>
                `;
                container.appendChild(promoSection);

            } catch (error) {
                console.error('Error loading ranks:', error);
                document.getElementById('ranksContainer').innerHTML = '<p>Error loading rank data</p>';
            }
        }

        function siteSearch() {
            const query = document.getElementById('siteSearch').value.toLowerCase();
            const results = document.getElementById('searchResults');
            
            if (!query) {
                results.innerHTML = '';
                return;
            }
            
            const searchableElements = document.querySelectorAll('h1, h2, h3, h4, p, li, td');
            const matches = [];
            
            searchableElements.forEach(el => {
                if (el.textContent.toLowerCase().includes(query)) {
                    matches.push({
                        text: el.textContent.substring(0, 100) + '...',
                        element: el
                    });
                }
            });
            
            if (matches.length > 0) {
                results.innerHTML = matches.map(match => `
                    <div class="search-result">
                        <p>${match.text}</p>
                    </div>
                `).join('');
            } else {
                results.innerHTML = '<div class="no-results">No results found</div>';
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            loadRanks();
            
            const searchInput = document.getElementById('siteSearch');
            if (searchInput) {
                searchInput.addEventListener('input', siteSearch);
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        siteSearch();
                    }
                });
            }
        });
        
        function logout() {
            if (window.authSystem) {
                window.authSystem.logout();
            } else {
                localStorage.removeItem('ukbrum_auth');
                location.reload();
            }
        }
    </script>
    <script src="js/main.js"></script>
    <script src="js/auth.js"></script>
</body>

</html>